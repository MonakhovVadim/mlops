# Практическое задание №2

В ходе практической работы был создан простейший конвейер для автоматизации работы с моделью машинного обучения. Отдельные этапы конвейера машинного обучения описываются в разных python–скриптах, которые потом соединяются с помощью Jenkins. В качестве примера используется модель, которая предсказывает курс доллара к рублю из предыдущей работы.

### Запуск сборки
Для запуска пайплана необходимо настроить Jenkins для выполнения Pipeline script from SCM, указав URL репозитория, ветку и путь до Jenkinsfile. Следует отметить, что в некоторых системах в качестве shell используются облочки отличные от bash, в которых комнада `source` может быть недоступна. При этом команда используется в скрипте для активации виртуальной среды. В частности, для ubuntu используется `dash`. Чтобы Jenkins использовал bash, необходимо ввести команду `$sudo dpkg-reconfigure dash` и на появившийся вопрос ответить No. После этого можно запускать пайплайн в Jenkins.

### Этапы pipeline
- Declarative: Checkout SCM - проверка наличия изменения в репозитории
- Настройка виртуального окружения - установка виртуального окружения и инсталяция библиотек из файла requirements.txt
- Генерация данных(data_creation.py) генерирует случайные курсы валюты и сохраняет в папки data/test и data/train
- Предобработка данных(model_preprocessing.py) предобрабатывает данные из предыдущего пункта и сохраняет в папки data/test и data/train
- Обучение модели(model_preparation.py) обучает модель на предобработанных данных и сохраняет модель в папку model
- Проверка модели на тестовых данных(model_testing.py) - загружает сохраненную модель и тестирует ее с помощью метрик MSE и r2
- Завершение работы - маркер окончания работы пайплайна

### Оценка качества модели
В практической работе создана генерация курса валют, которая обладает некоторыми повадками "настоящего" курса. В настоящей жизни существует огромное количество предикторов таких как изменение валютного баланса страны, политические и экономические события, принятие новых законодательных актов и очень много чего еще, которые по понятным причинам не используются в данной работе. В связи с этим внятно предсказывать курс валюты без этих знаний практически невозможно. Тем не менее в работе используется модель "случайный лес", которая достигла метрики r2 = 0.525, что является не таким плохим показателем, учитывая изложенные выше аргументы. Так же стоит отметить, что на этих же данных в предыдущей работе использовалась модель линейной регрессии и ее метрики были существенно хуже. Т.е. как минимум выбор модели играет большое значение в предсказательной способности. В качестве улучшения следует поиграть с гиперпараметрами модели через GridSearch и поискать более оптимальные. Но, в целом, в связи с малым количеством предикторов и их малой значимости добиться существенного улучшения метрик вряд ли получится.
